(()=>{"use strict";var t={711:(t,n,e)=>{e.d(n,{A:()=>h});var o=e(601),a=e.n(o),r=e(314),i=e.n(r),s=e(417),c=e.n(s),l=new URL(e(570),e.b),d=i()(a()),u=c()(l);d.push([t.id,`.car {\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  gap: 5px;\n  padding: 10px;\n  background-color: var(--color-container);\n  border-radius: 10px;\n}\n\n.car__buttons {\n  display: flex;\n  gap: 10px;\n}\n\n.car__body {\n  position: relative;\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n\n.car__image {\n  position: absolute;\n  left: 0;\n  width: 150px;\n  height: 55px;\n  stroke: #000;\n}\n\n.car__controls {\n  display: flex;\n  align-items: start;\n  gap: 10px;\n}\n.car__state-label {\n  margin-left: auto;\n  margin-right: 30px;\n  color: var(--color-body-dark);\n}\n\n.car__track {\n  position: relative;\n  display: flex;\n  height: 55px;\n  flex-grow: 1;\n  align-self: flex-end;\n}\n\n.car__road {\n  width: 100%;\n  height: 5px;\n  background-color: var(--color-body-dark);\n  border-radius: 10px;\n}\n.car__edit-button,\n.car__delete-button,\n.car__run-button,\n.car__stop-button {\n  width: 30px;\n  height: 30px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  svg {\n    width: 20px;\n    height: 20px;\n    fill: var(--color-body-dark);\n  }\n}\n\n.car__finish {\n  position: absolute;\n  background-image: url(${u});\n  background-repeat: no-repeat;\n  width: 50px;\n  height: 50px;\n  bottom: 0px;\n  right: 0;\n}\n\n.car__finish-place {\n  width: 170px;\n}\n\n@media (width <= 648px) {\n  .car__finish-place {\n    width: 100px;\n  }\n\n  .car__image {\n    width: 100px;\n    height: 40px;\n  }\n  .car__finish {\n    width: 40px;\n    height: 40px;\n  }\n\n  .car__track {\n    height: 40px;\n  }\n}\n`,""]);const h=d},16:(t,n,e)=>{e.d(n,{A:()=>s});var o=e(601),a=e.n(o),r=e(314),i=e.n(r)()(a());i.push([t.id,".overlay_transparent {\n  background-color: rgba(31, 32, 65, 0.1);\n  backdrop-filter: blur(1px);\n}\n.modal-winner {\n  max-width: 500px;\n  background-color: rgba(31, 32, 65, 0.7);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 20px;\n  border-radius: 20px;\n  flex-direction: column;\n  backdrop-filter: blur(3px);\n}\n",""]);const s=i},783:(t,n,e)=>{e.d(n,{A:()=>s});var o=e(601),a=e.n(o),r=e(314),i=e.n(r)()(a());i.push([t.id,".winner {\n  display: grid;\n  grid-template-columns: 30px 100px 200px 70px 70px;\n  align-items: center;\n  border-top: 1px var(--color-container) solid;\n}\n\n.winner__image {\n  width: 90px;\n  height: 50px;\n  stroke: #000;\n}\n\n.winner__number {\n  display: flex;\n  justify-content: center;\n}\n\n.winner__name {\n  display: flex;\n  justify-content: center;\n  text-align: center;\n}\n\n.winner__image {\n  display: flex;\n  justify-content: center;\n}\n\n.winner__wins {\n  display: flex;\n  justify-content: center;\n}\n\n.winner__time {\n  display: flex;\n  justify-content: center;\n}\n",""]);const s=i},208:(t,n,e)=>{e.d(n,{A:()=>s});var o=e(601),a=e.n(o),r=e(314),i=e.n(r)()(a());i.push([t.id,"* {\n  box-sizing: inherit;\n  font-family: inherit;\n}\n\n:root {\n  --color-body-dark: #1f2041;\n  --color-container: #4b3f72;\n  --color-highlight: #ffc857;\n  --color-label-light: #119da4;\n  --color-label-dark: #19547e;\n  --color-text-light: #fbfef9;\n  --color-text-red: #f22b29;\n  --color-container-grey: #e1e2ef;\n}\n\nhtml {\n  box-sizing: border-box;\n  scroll-behavior: smooth;\n}\n\na {\n  text-decoration: none;\n  color: var(--color-text-white);\n}\n\nbody {\n  display: flex;\n  margin: 0;\n  flex-direction: column;\n  align-items: center;\n  min-height: 100vh;\n  font-family: Montserrat;\n  color: #ffffff;\n  text-rendering: optimizelegibility;\n  text-size-adjust: 100%;\n  -webkit-font-smoothing: antialiased;\n  -webkit-tap-highlight-color: transparent;\n  background-color: var(--color-body-dark);\n  transition: 2s;\n}\n\nh1,\nh2,\nh3 {\n  margin: 0;\n}\n\n.fixed {\n  overflow: hidden;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n}\n\nbutton {\n  background-color: var(--color-label-light);\n  color: var(--color-text-light);\n  font-size: 16px;\n  border: none;\n  display: flex;\n  flex-grow: 0;\n  max-height: 40px;\n  padding: 7px;\n  border-radius: 10px;\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n  transition: 0.3s;\n  animation: fadein 0.3s ease-in;\n  user-select: none;\n}\n\nbutton:disabled {\n  pointer-events: none;\n  opacity: 0.5;\n}\n",""]);const s=i},449:(t,n,e)=>{e.d(n,{A:()=>g});var o=e(601),a=e.n(o),r=e(314),i=e.n(r),s=e(417),c=e.n(s),l=new URL(e(501),e.b),d=new URL(e(394),e.b),u=i()(a()),h=c()(l),p=c()(d);u.push([t.id,`.footer {\n  margin-top: auto;\n  padding: 10px;\n  z-index: 2;\n}\n.footer__container {\n  margin: 0 auto;\n  width: 100%;\n  max-width: 1024px;\n  display: flex;\n  gap: 20px;\n}\n\n.footer__rss {\n  display: block;\n  width: 120px;\n  height: 47px;\n  margin: auto 0px;\n  background-image: url(${h});\n  background-repeat: no-repeat;\n  background-size: contain;\n  opacity: 0.5;\n  transition: 1s;\n}\n\n.footer__github {\n  position: relative;\n  grid-area: 1 / 3 / 2 / 4;\n  margin: auto 40px;\n  margin-left: auto;\n  color: #fff;\n  text-decoration: none;\n  opacity: 0.5;\n  transition: 1s;\n}\n\n.footer__github::after {\n  position: absolute;\n  content: "";\n  top: -5px;\n  left: calc(100% + 10px);\n  width: 26px;\n  height: 26px;\n  background-image: url(${p});\n  filter: grayscale(100) brightness(3);\n  transition: 1s;\n}\n\n.footer__year {\n  opacity: 0.5;\n}\n\n@media (hover: hover) and (pointer: fine) {\n  .footer__github:hover,\n  .footer__rss:hover {\n    opacity: 1;\n  }\n}\n\n@media (width <= 420px) {\n  .footer__container {\n    flex-wrap: wrap;\n    gap: 5px;\n  }\n  .footer__rss {\n    width: 100px;\n  }\n}\n`,""]);const g=u},149:(t,n,e)=>{e.d(n,{A:()=>s});var o=e(601),a=e.n(o),r=e(314),i=e.n(r)()(a());i.push([t.id,".garage__controls {\n  display: flex;\n  flex-direction: column;\n  max-width: 300px;\n  justify-content: flex-start;\n  gap: 10px;\n}\n\n.garage__control-create,\n.garage__control-update {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.garage__control-color {\n  display: block;\n  background-color: transparent;\n  border: none;\n  width: 35px;\n  height: 35px;\n  flex-shrink: 0;\n  padding: 0;\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  appearance: none;\n  cursor: pointer;\n}\n.garage__control-color::-webkit-color-swatch {\n  border-radius: 10px;\n  border: 1px solid var(--color-text-light);\n}\n.garage__control-color::-moz-color-swatch {\n  border-radius: 10px;\n  border: 1px solid var(--color-text-light);\n}\n\n.garage__control-input {\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  appearance: none;\n  background-color: var(--color-text-light);\n  padding: 7px;\n  border: none;\n  border-radius: 10px;\n}\n\n.garage__control-race {\n  display: flex;\n  width: 100%;\n  justify-content: space-between;\n  gap: 5px;\n}\n\n.garage__control-race-start,\n.garage__control-race-stop {\n  flex-grow: 1;\n}\n",""]);const s=i},830:(t,n,e)=>{e.d(n,{A:()=>s});var o=e(601),a=e.n(o),r=e(314),i=e.n(r)()(a());i.push([t.id,".garage__pagination {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  align-items: flex-start;\n}\n\n.garage__pagination-container {\n  display: flex;\n}\n\n.garage__pagination-prev,\n.garage__pagination-next,\n.garage__pagination-label {\n  flex-shrink: 0;\n  min-width: 40px;\n  padding: 5px;\n}\n",""]);const s=i},293:(t,n,e)=>{e.d(n,{A:()=>s});var o=e(601),a=e.n(o),r=e(314),i=e.n(r)()(a());i.push([t.id,".garage {\n  display: grid;\n  grid-template-columns: minmax(300px, 350px) auto;\n  grid-template-rows: auto auto;\n  grid-column-gap: 10px;\n  grid-row-gap: 10px;\n}\n\n.garage__title {\n  padding: 10px 0;\n}\n\n.garage__title {\n  grid-area: 1 / 1 / 2 / 3;\n}\n.garage__controls {\n  grid-area: 2 / 1 / 3 / 2;\n}\n.garage__pagination {\n  grid-area: 2 / 2 / 3 / 3;\n}\n.garage__pages {\n  grid-area: 3 / 1 / 4 / 3;\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n}\n",""]);const s=i},61:(t,n,e)=>{e.d(n,{A:()=>s});var o=e(601),a=e.n(o),r=e(314),i=e.n(r)()(a());i.push([t.id,".header {\n  display: flex;\n  justify-content: space-between;\n  width: 100%;\n  height: 60px;\n  max-width: 1024px;\n  align-items: center;\n  padding: 10px;\n}\n\n.header__logo {\n  font-weight: 900;\n}\n\n.header__nav {\n  display: flex;\n  gap: 10px;\n}\n\n.header__link {\n  border: 1px var(--color-text-light) solid;\n  padding: 5px;\n  border-radius: 10px;\n}\n\n.header__link_active {\n  border: 1px var(--color-text-light) solid;\n  color: var(--color-body-dark);\n  background-color: var(--color-text-light);\n  padding: 5px;\n  border-radius: 10px;\n}\n",""]);const s=i},81:(t,n,e)=>{e.d(n,{A:()=>h});var o=e(601),a=e.n(o),r=e(314),i=e.n(r),s=e(417),c=e.n(s),l=new URL(e(138),e.b),d=i()(a()),u=c()(l);d.push([t.id,`@keyframes spin {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n\n.overlay {\n  position: fixed;\n  z-index: 10;\n  padding: 10px;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.8);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  animation: fadein 0.3s ease-in;\n}\n\n.loader {\n  background-image: url(${u});\n  background-repeat: no-repeat;\n  width: 40px;\n  height: 40px;\n  background-size: contain;\n  animation: spin 3s linear infinite;\n}\n\n.overlay_loader {\n  background-color: rgba(0, 0, 0, 0.8);\n}\n\n@keyframes fadein {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n\n@keyframes fadeout {\n  0% {\n    opacity: 1;\n  }\n  100% {\n    opacity: 0;\n  }\n}\n\n.fade-out {\n  animation: fadeout 0.3s ease-in forwards;\n  pointer-events: none;\n}\n\n.fade-out-slow {\n  animation: fadeout 2s ease-in forwards;\n}\n\n.fade-in {\n  animation: fadein 0.3s ease-in forwards;\n}\n\n.fade-in-slow {\n  animation: fadein 2s ease-in forwards;\n}\n`,""]);const h=d},333:(t,n,e)=>{e.d(n,{A:()=>s});var o=e(601),a=e.n(o),r=e(314),i=e.n(r)()(a());i.push([t.id,".main {\n  display: flex;\n  z-index: 2;\n  flex-grow: 1;\n  flex-direction: column;\n  height: 100%;\n  width: 100%;\n  max-width: 1024px;\n  padding: 10px;\n}\n",""]);const s=i},361:(t,n,e)=>{e.d(n,{A:()=>g});var o=e(601),a=e.n(o),r=e(314),i=e.n(r),s=e(417),c=e.n(s),l=new URL(e(989),e.b),d=new URL(e(442),e.b),u=i()(a()),h=c()(l),p=c()(d);u.push([t.id,`.winners__table {\n  display: flex;\n  flex-direction: column;\n  max-width: 500px;\n}\n\n.winners__table-controls {\n  display: grid;\n  padding: 10px 0;\n  grid-template-columns: auto auto;\n}\n\n/* .winners__table-title{} */\n\n.winners__table-pagination {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n}\n.winners__pagination-prev,\n.winners__pagination-next {\n  width: 40px;\n  height: 30px;\n  flex-shrink: 0;\n}\n/* .winners__pagination-label{\n\n} */\n\n.winners__table-header {\n  display: grid;\n  grid-template-columns: 30px 100px 200px 70px 70px;\n  background: var(--color-container);\n}\n\n.winners__table-number {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.winners__table-name {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.winners__table-color {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.winners__table-wins {\n  background-color: transparent;\n  position: relative;\n}\n\n.winners__table-time {\n  background-color: transparent;\n  position: relative;\n}\n\n.winners__table-body {\n  display: flex;\n  flex-direction: column;\n  margin: 0;\n  padding: 0;\n  min-height: 508px;\n}\n\n.desc::after,\n.asc::after {\n  content: "";\n  position: absolute;\n  width: 15px;\n  height: 15px;\n  left: 80%;\n  align-self: center;\n  background-repeat: no-repeat;\n  background-size: contain;\n  background-position: center;\n}\n\n.asc::after {\n  background-image: url(${h});\n  top: 12px;\n}\n.desc::after {\n  background-image: url(${p});\n  top: 7px;\n}\n`,""]);const g=u},314:t=>{t.exports=function(t){var n=[];return n.toString=function(){return this.map((function(n){var e="",o=void 0!==n[5];return n[4]&&(e+="@supports (".concat(n[4],") {")),n[2]&&(e+="@media ".concat(n[2]," {")),o&&(e+="@layer".concat(n[5].length>0?" ".concat(n[5]):""," {")),e+=t(n),o&&(e+="}"),n[2]&&(e+="}"),n[4]&&(e+="}"),e})).join("")},n.i=function(t,e,o,a,r){"string"==typeof t&&(t=[[null,t,void 0]]);var i={};if(o)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(i[c]=!0)}for(var l=0;l<t.length;l++){var d=[].concat(t[l]);o&&i[d[0]]||(void 0!==r&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=r),e&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=e):d[2]=e),a&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=a):d[4]="".concat(a)),n.push(d))}},n}},417:t=>{t.exports=function(t,n){return n||(n={}),t?(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),n.hash&&(t+=n.hash),/["'() \t\n]|(%20)/.test(t)||n.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t):t}},601:t=>{t.exports=function(t){return t[1]}},72:t=>{var n=[];function e(t){for(var e=-1,o=0;o<n.length;o++)if(n[o].identifier===t){e=o;break}return e}function o(t,o){for(var r={},i=[],s=0;s<t.length;s++){var c=t[s],l=o.base?c[0]+o.base:c[0],d=r[l]||0,u="".concat(l," ").concat(d);r[l]=d+1;var h=e(u),p={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==h)n[h].references++,n[h].updater(p);else{var g=a(p,o);o.byIndex=s,n.splice(s,0,{identifier:u,updater:g,references:1})}i.push(u)}return i}function a(t,n){var e=n.domAPI(n);return e.update(t),function(n){if(n){if(n.css===t.css&&n.media===t.media&&n.sourceMap===t.sourceMap&&n.supports===t.supports&&n.layer===t.layer)return;e.update(t=n)}else e.remove()}}t.exports=function(t,a){var r=o(t=t||[],a=a||{});return function(t){t=t||[];for(var i=0;i<r.length;i++){var s=e(r[i]);n[s].references--}for(var c=o(t,a),l=0;l<r.length;l++){var d=e(r[l]);0===n[d].references&&(n[d].updater(),n.splice(d,1))}r=c}}},659:t=>{var n={};t.exports=function(t,e){var o=function(t){if(void 0===n[t]){var e=document.querySelector(t);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(t){e=null}n[t]=e}return n[t]}(t);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(e)}},540:t=>{t.exports=function(t){var n=document.createElement("style");return t.setAttributes(n,t.attributes),t.insert(n,t.options),n}},56:(t,n,e)=>{t.exports=function(t){var n=e.nc;n&&t.setAttribute("nonce",n)}},825:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var n=t.insertStyleElement(t);return{update:function(e){!function(t,n,e){var o="";e.supports&&(o+="@supports (".concat(e.supports,") {")),e.media&&(o+="@media ".concat(e.media," {"));var a=void 0!==e.layer;a&&(o+="@layer".concat(e.layer.length>0?" ".concat(e.layer):""," {")),o+=e.css,a&&(o+="}"),e.media&&(o+="}"),e.supports&&(o+="}");var r=e.sourceMap;r&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),n.styleTagTransform(o,t,n.options)}(n,t,e)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)}}}},113:t=>{t.exports=function(t,n){if(n.styleSheet)n.styleSheet.cssText=t;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(t))}}},570:(t,n,e)=>{t.exports=e.p+"assets/car/finish..svg"},394:(t,n,e)=>{t.exports=e.p+"assets/icons/github..svg"},138:(t,n,e)=>{t.exports=e.p+"assets/icons/loader..svg"},501:(t,n,e)=>{t.exports=e.p+"assets/icons/rss..svg"},442:(t,n,e)=>{t.exports=e.p+"assets/icons/sort-down-solid..svg"},989:(t,n,e)=>{t.exports=e.p+"assets/icons/sort-up-solid..svg"}},n={};function e(o){var a=n[o];if(void 0!==a)return a.exports;var r=n[o]={id:o,exports:{}};return t[o](r,r.exports,e),r.exports}e.m=t,e.n=t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},e.d=(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),e.o=(t,n)=>Object.prototype.hasOwnProperty.call(t,n),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var n=e.g.document;if(!t&&n&&(n.currentScript&&(t=n.currentScript.src),!t)){var o=n.getElementsByTagName("script");if(o.length)for(var a=o.length-1;a>-1&&(!t||!/^http(s?):/.test(t));)t=o[a--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})(),e.b=document.baseURI||self.location.href,e.nc=void 0,(()=>{var t=e(72),n=e.n(t),o=e(825),a=e.n(o),r=e(659),i=e.n(r),s=e(56),c=e.n(s),l=e(540),d=e.n(l),u=e(113),h=e.n(u),p=e(208),g={};g.styleTagTransform=h(),g.setAttributes=c(),g.insert=i().bind(null,"head"),g.domAPI=a(),g.insertStyleElement=d(),n()(p.A,g),p.A&&p.A.locals&&p.A.locals;var m=e(333),f={};f.styleTagTransform=h(),f.setAttributes=c(),f.insert=i().bind(null,"head"),f.domAPI=a(),f.insertStyleElement=d(),n()(m.A,f),m.A&&m.A.locals&&m.A.locals;class v{constructor(t,n,e,o,...a){this.content=[],this.childComponents=[],this.listeners=[],this.node=document.createElement(t),n&&n.forEach((t=>{this.node.classList.add(t)})),e&&Object.assign(this.node,e),o&&Object.keys(o).forEach((t=>{const n=o[t];n&&this.node.setAttribute(t,n)})),a&&this.appendContent(a)}getComponent(){return this.node}getContent(){return this.content}getChildComponents(){return this.childComponents}append(t){t&&(t instanceof v?(this.node.append(t.getComponent()),this.content.push(t.getComponent()),this.childComponents.push(t)):this.node.append(t))}appendContent(t){t.forEach((t=>{t&&this.append(t)}))}setAttribute(t,n){void 0!==n&&this.node.setAttribute(t,n)}setTextContent(t){t&&(this.node.textContent=t)}addListener(t,n,e){this.node.addEventListener(t,n,e);const o={eType:t,handler:n};e&&(o.options=e),this.listeners.push(o)}removeListenerOfType(t){this.listeners.forEach((n=>{n.eType===t&&(n.options?this.node.removeEventListener(n.eType,n.handler,n.options):this.node.removeEventListener(n.eType,n.handler))}))}removeAllListeners(){this.listeners.forEach((t=>{t.options?this.node.removeEventListener(t.eType,t.handler,t.options):this.node.removeEventListener(t.eType,t.handler)}))}setStyleAttribute(t,n){this.node.style.setProperty(t,n)}removeStyleAttribute(t){this.node.style.removeProperty(t)}getSize(){return{width:this.node.clientWidth,height:this.node.clientHeight}}getCoordinates(){const t=this.getComponent().getBoundingClientRect();return{x:t.left,y:t.top,centerX:t.left+t.width/2,centerY:t.top+t.height/2,width:t.width,height:t.height}}clear(){this.content.forEach((t=>{t instanceof v?t.destroy():null==t||t.remove()})),this.content=[],this.clearAll()}destroy(){this.clear(),this.node.remove()}clearAll(){for(;this.node.firstChild;)this.node.removeChild(this.node.firstChild)}}const C=v;var b=e(293),y={};y.styleTagTransform=h(),y.setAttributes=c(),y.insert=i().bind(null,"head"),y.domAPI=a(),y.insertStyleElement=d(),n()(b.A,y),b.A&&b.A.locals&&b.A.locals;const w=(t,...n)=>new C("div",t,{},{},...n),x=(t,n)=>new C("p",t,{textContent:n}),_=(t,n)=>new C("h2",t,{textContent:n}),S=(t,n)=>new C("h3",t,{textContent:n}),A=(t,n,e)=>new C("a",t,{textContent:n},{href:e}),P=(t,n,...e)=>{const o=new C("button",t,{},{});return o.setTextContent(n),o.appendContent(e),o.setAttribute("type","button"),o},k=(t,n)=>new C("input",t,n),T=(t,n)=>{const e=new C("span",t);return n&&(e.getComponent().textContent=n),e},L=(t,n,e="0 0 200 70.72")=>{const o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.setAttribute("viewbox",e),o.classList.add(n);const a=document.createElementNS("http://www.w3.org/2000/svg","use");return a.setAttribute("href",t),o.append(a),o};var I,E=e(149),R={};function B(t,n){return!!function(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)&&"Object"===t.constructor.name}(t)&&Object.entries(t).every((([t,e])=>t in n&&typeof e==typeof n[t]))}function M(t,n){if(!B(t,n))throw new Error("Invalid data shape!")}function G(t,n){if(!function(t,n){if(!Array.isArray(t))throw new Error;return t.every((t=>B(t,n)))}(t,n))throw new Error("Invalid data shape!")}R.styleTagTransform=h(),R.setAttributes=c(),R.insert=i().bind(null,"head"),R.domAPI=a(),R.insertStyleElement=d(),n()(E.A,R),E.A&&E.A.locals&&E.A.locals,function(t){t.BASE="http://127.0.0.1:3000",t.WINNERS="http://127.0.0.1:3000/winners",t.GARAGE="http://127.0.0.1:3000/garage",t.ENGINE="http://127.0.0.1:3000/engine"}(I||(I={}));const $=I,W=[{brand:"Renault",models:["Captur","Clio","Clio Grandtour","Espace","Express","Fluence","Grand Espace","Grand Modus","Grand Scenic","Kadjar","Kangoo","Kangoo Express","Koleos","Laguna","Laguna Grandtour","Latitude","Mascott","Mégane","Mégane CC","Mégane Combi","Mégane Grandtour","Mégane Coupé","Mégane Scénic","Scénic","Talisman","Talisman Grandtour","Thalia","Twingo","Wind","Zoé"]},{brand:"Peugeot",models:["1007","107","106","108","2008","205","205 Cabrio","206","206 CC","206 SW","207","207 CC","207 SW","306","307","307 CC","307 SW","308","308 CC","308 SW","309","4007","4008","405","406","407","407 SW","5008","508","508 SW","605","806","607","807","Bipper","RCZ"]},{brand:"Citroën",models:["Berlingo","C-Crosser","C-Elissée","C-Zero","C1","C2","C3","C3 Picasso","C4","C4 Aircross","C4 Cactus","C4 Coupé","C4 Grand Picasso","C4 Sedan","C5","C5 Break","C5 Tourer","C6","C8","DS3","DS4","DS5","Evasion","Jumper","Jumpy","Saxo","Nemo","Xantia","Xsara"]},{brand:"Opel",models:["Agila","Ampera","Antara","Astra","Astra cabrio","Astra caravan","Astra coupé","Calibra","Campo","Cascada","Corsa","Frontera","Insignia","Insignia kombi","Kadett","Meriva","Mokka","Movano","Omega","Signum","Vectra","Vectra Caravan","Vivaro","Vivaro Kombi","Zafira"]},{brand:"Škoda",models:["Favorit","Felicia","Citigo","Fabia","Fabia Combi","Fabia Sedan","Felicia Combi","Octavia","Octavia Combi","Roomster","Yeti","Rapid","Rapid Spaceback","Superb","Superb Combi"]},{brand:"Chevrolet",models:["Alero","Aveo","Camaro","Captiva","Corvette","Cruze","Cruze SW","Epica","Equinox","Evanda","HHR","Kalos","Lacetti","Lacetti SW","Lumina","Malibu","Matiz","Monte Carlo","Nubira","Orlando","Spark","Suburban","Tacuma","Tahoe","Trax"]},{brand:"Porsche",models:["911 Carrera","911 Carrera Cabrio","911 Targa","911 Turbo","924","944","997","Boxster","Cayenne","Cayman","Macan","Panamera"]},{brand:"Honda",models:["Accord","Accord Coupé","Accord Tourer","City","Civic","Civic Aerodeck","Civic Coupé","Civic Tourer","Civic Type R","CR-V","CR-X","CR-Z","FR-V","HR-V","Insight","Integra","Jazz","Legend","Prelude"]},{brand:"Subaru",models:["BRZ","Forester","Impreza","Impreza Wagon","Justy","Legacy","Legacy Wagon","Legacy Outback","Levorg","Outback","SVX","Tribeca","Tribeca B9","XV"]},{brand:"Mazda",models:["121","2","3","323","323 Combi","323 Coupé","323 F","5","6","6 Combi","626","626 Combi","B-Fighter","B2500","BT","CX-3","CX-5","CX-7","CX-9","Demio","MPV","MX-3","MX-5","MX-6","Premacy","RX-7","RX-8","Xedox 6"]},{brand:"Mitsubishi",models:["3000 GT","ASX","Carisma","Colt","Colt CC","Eclipse","Fuso canter","Galant","Galant Combi","Grandis","L200","L200 Pick up","L200 Pick up Allrad","L300","Lancer","Lancer Combi","Lancer Evo","Lancer Sportback","Outlander","Pajero","Pajeto Pinin","Pajero Pinin Wagon","Pajero Sport","Pajero Wagon","Space Star"]},{brand:"Lexus",models:["CT","GS","GS 300","GX","IS","IS 200","IS 250 C","IS-F","LS","LX","NX","RC F","RX","RX 300","RX 400h","RX 450h","SC 430"]},{brand:"Toyota",models:["4-Runner","Auris","Avensis","Avensis Combi","Avensis Van Verso","Aygo","Camry","Carina","Celica","Corolla","Corolla Combi","Corolla sedan","Corolla Verso","FJ Cruiser","GT86","Hiace","Hiace Van","Highlander","Hilux","Land Cruiser","MR2","Paseo","Picnic","Prius","RAV4","Sequoia","Starlet","Supra","Tundra","Urban Cruiser","Verso","Yaris","Yaris Verso"]},{brand:"BMW",models:["i3","i8","M3","M4","M5","M6","Rad 1","Rad 1 Cabrio","Rad 1 Coupé","Rad 2","Rad 2 Active Tourer","Rad 2 Coupé","Rad 2 Gran Tourer","Rad 3","Rad 3 Cabrio","Rad 3 Compact","Rad 3 Coupé","Rad 3 GT","Rad 3 Touring","Rad 4","Rad 4 Cabrio","Rad 4 Gran Coupé","Rad 5","Rad 5 GT","Rad 5 Touring","Rad 6","Rad 6 Cabrio","Rad 6 Coupé","Rad 6 Gran Coupé","Rad 7","Rad 8 Coupé","X1","X3","X4","X5","X6","Z3","Z3 Coupé","Z3 Roadster","Z4","Z4 Roadster"]},{brand:"Volkswagen",models:["Amarok","Beetle","Bora","Bora Variant","Caddy","Caddy Van","Life","California","Caravelle","CC","Crafter","Crafter Van","Crafter Kombi","CrossTouran","Eos","Fox","Golf","Golf Cabrio","Golf Plus","Golf Sportvan","Golf Variant","Jetta","LT","Lupo","Multivan","New Beetle","New Beetle Cabrio","Passat","Passat Alltrack","Passat CC","Passat Variant","Passat Variant Van","Phaeton","Polo","Polo Van","Polo Variant","Scirocco","Sharan","T4","T4 Caravelle","T4 Multivan","T5","T5 Caravelle","T5 Multivan","T5 Transporter Shuttle","Tiguan","Touareg","Touran"]},{brand:"Suzuki",models:["Alto","Baleno","Baleno kombi","Grand Vitara","Grand Vitara XL-7","Ignis","Jimny","Kizashi","Liana","Samurai","Splash","Swift","SX4","SX4 Sedan","Vitara","Wagon R+"]},{brand:"Mercedes-Benz",models:["100 D","115","124","126","190","190 D","190 E","200 - 300","200 D","200 E","210 Van","210 kombi","310 Van","310 kombi","230 - 300 CE Coupé","260 - 560 SE","260 - 560 SEL","500 - 600 SEC Coupé","Trieda A","A","A L","AMG GT","Trieda B","Trieda C","C","C Sportcoupé","C T","Citan","CL","CL","CLA","CLC","CLK Cabrio","CLK Coupé","CLS","Trieda E","E","E Cabrio","E Coupé","E T","Trieda G","G Cabrio","GL","GLA","GLC","GLE","GLK","Trieda M","MB 100","Trieda R","Trieda S","S","S Coupé","SL","SLC","SLK","SLR","Sprinter"]},{brand:"Audi",models:["100","100 Avant","80","80 Avant","80 Cabrio","90","A1","A2","A3","A3 Cabriolet","A3 Limuzina","A3 Sportback","A4","A4 Allroad","A4 Avant","A4 Cabriolet","A5","A5 Cabriolet","A5 Sportback","A6","A6 Allroad","A6 Avant","A7","A8","A8 Long","Q3","Q5","Q7","R8","RS4 Cabriolet","RS4/RS4 Avant","RS5","RS6 Avant","RS7","S3/S3 Sportback","S4 Cabriolet","S4/S4 Avant","S5/S5 Cabriolet","S6/RS6","S7","S8","SQ5","TT Coupé","TT Roadster","TTS"]},{brand:"Kia",models:["Avella","Besta","Carens","Carnival","Cee`d","Cee`d SW","Cerato","K 2500","Magentis","Opirus","Optima","Picanto","Pregio","Pride","Pro Cee`d","Rio","Rio Combi","Rio sedan","Sephia","Shuma","Sorento","Soul","Sportage","Venga"]},{brand:"Land Rover",models:["109","Defender","Discovery","Discovery Sport","Freelander","Range Rover","Range Rover Evoque","Range Rover Sport"]},{brand:"Ford",models:["Aerostar","B-Max","C-Max","Cortina","Cougar","Edge","Escort","Escort Cabrio","Escort kombi","Explorer","F-150","F-250","Fiesta","Focus","Focus C-Max","Focus CC","Focus kombi","Fusion","Galaxy","Grand C-Max","Ka","Kuga","Maverick","Mondeo","Mondeo Combi","Mustang","Orion","Puma","Ranger","S-Max","Sierra","Street Ka","Tourneo Connect","Tourneo Custom","Transit","Transit","Transit Bus","Transit Connect LWB","Transit Courier","Transit Custom","Transit kombi","Transit Tourneo","Transit Valnik","Transit Van","Transit Van 350","Windstar"]},{brand:"Hyundai",models:["Accent","Atos","Atos Prime","Coupé","Elantra","Galloper","Genesis","Getz","Grandeur","H 350","H1","H1 Bus","H1 Van","H200","i10","i20","i30","i30 CW","i40","i40 CW","ix20","ix35","ix55","Lantra","Matrix","Santa Fe","Sonata","Terracan","Trajet","Tucson","Veloster"]},{brand:"Jaguar",models:["Daimler","F-Pace","F-Type","S-Type","Sovereign","X-Type","X-type Estate","XE","XF","XJ","XJ12","XJ6","XJ8","XJ8","XJR","XK","XK8 Convertible","XKR","XKR Convertible"]},{brand:"Nissan",models:["100 NX","200 SX","350 Z","350 Z Roadster","370 Z","Almera","Almera Tino","Cabstar E - T","Cabstar TL2 Valnik","e-NV200","GT-R","Insterstar","Juke","King Cab","Leaf","Maxima","Maxima QX","Micra","Murano","Navara","Note","NP300 Pickup","NV200","NV400","Pathfinder","Patrol","Patrol GR","Pickup","Pixo","Primastar","Primastar Combi","Primera","Primera Combi","Pulsar","Qashqai","Serena","Sunny","Terrano","Tiida","Trade","Vanette Cargo","X-Trail"]},{brand:"Volvo",models:["240","340","360","460","850","850 kombi","C30","C70","C70 Cabrio","C70 Coupé","S40","S60","S70","S80","S90","V40","V50","V60","V70","V90","XC60","XC70","XC90"]},{brand:"Fiat",models:["1100","126","500","500L","500X","850","Barchetta","Brava","Cinquecento","Coupé","Croma","Doblo","Doblo Cargo","Doblo Cargo Combi","Ducato","Ducato Van","Ducato Kombi","Ducato Podvozok","Florino","Florino Combi","Freemont","Grande Punto","Idea","Linea","Marea","Marea Weekend","Multipla","Palio Weekend","Panda","Panda Van","Punto","Punto Cabriolet","Punto Evo","Punto Van","Qubo","Scudo","Scudo Van","Scudo Kombi","Sedici","Seicento","Stilo","Stilo Multiwagon","Strada","Talento","Tipo","Ulysse","Uno","X1/9"]}],j={id:1,wins:1,time:1},N={name:"",color:"",id:1},X={success:!0},O={velocity:64,distance:5e5},V={id:1,wins:1,time:1};var D=function(t,n,e,o){return new(e||(e=Promise))((function(a,r){function i(t){try{c(o.next(t))}catch(t){r(t)}}function s(t){try{c(o.throw(t))}catch(t){r(t)}}function c(t){var n;t.done?a(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(i,s)}c((o=o.apply(t,n||[])).next())}))};function F(t){return D(this,void 0,void 0,(function*(){let n=t;t||(n=function(){const t=W[Math.round(Math.random()*(W.length-1))];return{name:`${t.brand} ${t.models[Math.round(Math.random()*(t.models.length-1))]}`,color:`#${Math.floor(16777215*Math.random()).toString(16)}`}}());const e=yield fetch($.GARAGE,{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}});if(!e.ok)return console.log(`Cannot create car with options ${n}`),{};const o=yield e.json();return M(o,N),o}))}const z=F,K=new class{constructor(){this.eventList={}}on(t,n){return this.eventList[t]||(this.eventList[t]=[]),this.eventList[t].push(n),()=>this.off(t,n)}once(t,n){const e=this.on(t,((...t)=>{e(),n.apply(this,t)}))}off(t,n){this.eventList[t]=n?this.eventList[t].filter((t=>n!==t)):[]}emit(t,...n){this.eventList[t]&&this.eventList[t].forEach((t=>{t.call(this,n)}))}};const H=new class extends C{constructor(){super("form",["garage__control-create"],{},{action:""}),this.input=k(["garage__control-input"],{type:"text",value:""}),this.color=k(["garage__control-color"],{type:"color",value:"#000"}),this.button=P(["garage__control-button"],"CREATE"),this.appendContent([this.input,this.color,this.button]),this.button.addListener("click",(()=>{return t=this,n=void 0,o=function*(){""!==this.input.getComponent().value&&(yield z({name:this.input.getComponent().value,color:this.color.getComponent().value}),K.emit("car-created"))},new((e=void 0)||(e=Promise))((function(a,r){function i(t){try{c(o.next(t))}catch(t){r(t)}}function s(t){try{c(o.throw(t))}catch(t){r(t)}}function c(t){var n;t.done?a(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(i,s)}c((o=o.apply(t,n||[])).next())}));var t,n,e,o}))}},J=new class extends C{constructor(){super("button",["garage__control-generate"],{},{type:"button"}),this.setTextContent("GENERATE 100 CARS"),this.addListener("click",(()=>K.emit("generate-random-cars")))}};var U=function(t,n,e,o){return new(e||(e=Promise))((function(a,r){function i(t){try{c(o.next(t))}catch(t){r(t)}}function s(t){try{c(o.throw(t))}catch(t){r(t)}}function c(t){var n;t.done?a(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(i,s)}c((o=o.apply(t,n||[])).next())}))};function Z(t){return U(this,void 0,void 0,(function*(){const n=yield fetch(`${$.GARAGE}/${t}`);404===n.status&&K.emit("actualize-collection");const e=yield n.json();return M(e,N),e}))}function q(){return U(this,void 0,void 0,(function*(){try{const t=yield fetch(`${$.GARAGE}/`),n=yield t.json();return G(n,N),n}catch(t){return console.log("Failed to fetch. Please, launch the server."),[]}}))}const Q=new class extends C{constructor(){super("form",["garage__control-update"],{},{action:""}),this.input=k(["garage__control-input"],{type:"text",value:""}),this.color=k(["garage__control-color"],{type:"color",value:"#000"}),this.button=P(["garage__control-button"],"UPDATE"),this.appendContent([this.input,this.color,this.button]),this.button.addListener("click",(()=>{return t=this,n=void 0,o=function*(){if(""===this.getId())return;const t=yield Z(parseInt(this.getId(),10));t.name&&K.emit("edit-car"),t.name||console.log("Select another car to edit!")},new((e=void 0)||(e=Promise))((function(a,r){function i(t){try{c(o.next(t))}catch(t){r(t)}}function s(t){try{c(o.throw(t))}catch(t){r(t)}}function c(t){var n;t.done?a(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(i,s)}c((o=o.apply(t,n||[])).next())}));var t,n,e,o}))}getId(){return this.button.getComponent().value}getColor(){return this.color.getComponent().value}getName(){return this.input.getComponent().value}setProps(t,n,e){this.button.getComponent().value=`${t}`,this.input.getComponent().value=n,this.color.getComponent().value=e}resetInputs(){this.button.getComponent().value="",this.input.getComponent().value="",this.color.getComponent().value="#000000"}},Y=Q;const tt=class{constructor(t){this.currentState=t.currentState,this.callbacks=t.callbacks,this.states=t.states}emit(t){try{const n=this.states[this.currentState],e=n[t];if(!e)throw new Error(`cannot find ${n[t]} ${t} ${this.currentState}`);this.currentState=e.toState,e.callbacks.forEach((t=>{return n=this,e=void 0,a=function*(){try{yield this.callbacks[t].call(this)}catch(t){"DOMException: The user aborted a request."===t&&console.log("car stoped!")}},new((o=void 0)||(o=Promise))((function(t,r){function i(t){try{c(a.next(t))}catch(t){r(t)}}function s(t){try{c(a.throw(t))}catch(t){r(t)}}function c(n){var e;n.done?t(n.value):(e=n.value,e instanceof o?e:new o((function(t){t(e)}))).then(i,s)}c((a=a.apply(n,e||[])).next())}));var n,e,o,a}))}catch(t){console.log(t)}}getCurrentState(){return this.currentState}};var nt=e(81),et={};et.styleTagTransform=h(),et.setAttributes=c(),et.insert=i().bind(null,"head"),et.domAPI=a(),et.insertStyleElement=d(),n()(nt.A,et),nt.A&&nt.A.locals&&nt.A.locals;const ot=new class extends C{constructor(){super("div",["overlay","overlay_loader"])}draw(){this.append(w(["loader"])),document.body.append(this.getComponent())}close(){this.getComponent().classList.add("fade-out"),setTimeout((()=>{this.getComponent().classList.remove("fade-out"),this.destroy()}),500)}};var at=e(711),rt={};rt.styleTagTransform=h(),rt.setAttributes=c(),rt.insert=i().bind(null,"head"),rt.domAPI=a(),rt.insertStyleElement=d(),n()(at.A,rt),at.A&&at.A.locals&&at.A.locals;var it=function(t,n,e,o){return new(e||(e=Promise))((function(a,r){function i(t){try{c(o.next(t))}catch(t){r(t)}}function s(t){try{c(o.throw(t))}catch(t){r(t)}}function c(t){var n;t.done?a(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(i,s)}c((o=o.apply(t,n||[])).next())}))};function st(t,n){return it(this,void 0,void 0,(function*(){const e=yield fetch(`${$.ENGINE}?id=${t}&status=${n}`,{method:"PATCH"});404===e.status&&K.emit("actualize-collection"),404===e.status&&console.log("Car with such id was not found in the garage.");const o=yield e.json();return M(o,O),o}))}function ct(t,n){return it(this,void 0,void 0,(function*(){const e=yield fetch(`${$.ENGINE}?id=${t}&status=drive`,{method:"PATCH",signal:null==n?void 0:n.signal});if(200!==e.status)return 500===e.status&&console.log("Car has been stopped suddenly. It's engine was broken down."),429===e.status&&console.log("Drive already in progress. You can't run drive for the same car twice while it's not stopped."),404===e.status&&console.log("Engine parameters for car with such id was not found in the garage."),404===e.status&&K.emit("actualize-collection"),{success:!1,status:e.status};console.log(`Car id=${t} finished!`);const o=yield e.json();return M(o,X),o}))}const lt={"in-garage":{"start-car":{toState:"ready",callbacks:["prepare-car"]},finish:{toState:"in-garage",callbacks:["reset"]},broke:{toState:"in-garage",callbacks:[]},reset:{toState:"in-garage",callbacks:["reset"]},"move-car":{toState:"in-garage",callbacks:["reset"]},"start-race":{toState:"in-race",callbacks:[]}},ready:{"move-car":{toState:"moving",callbacks:["move-car"]},reset:{toState:"in-garage",callbacks:["reset"]},"start-car":{toState:"ready",callbacks:["prepare-car"]},"start-race":{toState:"in-race",callbacks:[]}},moving:{broke:{toState:"broken",callbacks:["stop-car-animation"]},pause:{toState:"paused",callbacks:["stop-car-animation"]},finish:{toState:"finished",callbacks:["stop-car-animation"]},reset:{toState:"in-garage",callbacks:["reset"]},"start-car":{toState:"ready",callbacks:["prepare-car"]},"move-car":{toState:"in-garage",callbacks:["reset"]},"start-race":{toState:"in-race",callbacks:[]}},broken:{reset:{toState:"in-garage",callbacks:["reset"]},"start-car":{toState:"ready",callbacks:["prepare-car"]},"start-race":{toState:"in-race",callbacks:[]}},finished:{"start-car":{toState:"ready",callbacks:["prepare-car"]},reset:{toState:"in-garage",callbacks:["reset"]},"start-race":{toState:"in-race",callbacks:[]}},"in-race":{reset:{toState:"in-garage",callbacks:["reset"]},finish:{toState:"in-garage",callbacks:[]},"start-car":{toState:"in-race",callbacks:[]},"start-race":{toState:"in-garage",callbacks:[]}}};var dt=function(t,n,e,o){return new(e||(e=Promise))((function(a,r){function i(t){try{c(o.next(t))}catch(t){r(t)}}function s(t){try{c(o.throw(t))}catch(t){r(t)}}function c(t){var n;t.done?a(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(i,s)}c((o=o.apply(t,n||[])).next())}))};const ut=class extends tt{constructor(t){super({currentState:"in-garage",states:lt,callbacks:{"prepare-car":()=>dt(this,void 0,void 0,(function*(){var t,n;this.abortController=new AbortController,this.carControls&&this.carControls.onmoveControls(),this.engineParams=yield st(this.carId,"started"),null===(t=this.carControls)||void 0===t||t.setCarStatus("ready"),this.carControls&&this.carControls.startAnimation(this.engineParams.distance/this.engineParams.velocity),this.emit("move-car"),null===(n=this.carControls)||void 0===n||n.setCarStatus("car is moving")})),"move-car":()=>dt(this,void 0,void 0,(function*(){var t,n;if(!this.engineParams)return;const e=yield ct(this.carId,this.abortController);e.success||(this.emit("broke"),null===(t=this.carControls)||void 0===t||t.setCarStatus("car is broken")),e.success&&(this.emit("finish"),null===(n=this.carControls)||void 0===n||n.setCarStatus("car is finished"))})),"stop-car-animation":()=>dt(this,void 0,void 0,(function*(){this.carControls&&this.carControls.stopAnimation()})),"abort-fetch":()=>dt(this,void 0,void 0,(function*(){this.abortController.abort("Car stoped")})),reset:()=>dt(this,void 0,void 0,(function*(){var t;this.engineParams=yield st(this.carId,"stopped"),null===(t=this.carControls)||void 0===t||t.setCarStatus(" "),this.carControls&&this.carControls.stopAnimation(),this.carControls&&this.carControls.moveCarToStart(),this.abortController.abort("Car stoped"),this.carControls&&this.carControls.lockStopButton()}))}}),this.carId=t,this.abortController=new AbortController,this.animationRun=new Promise((()=>{})),this.engineParams=null,this.carControls=null}getEngineParams(){return this.engineParams}on(t){this.carControls=t}},ht=class{constructor(){this.carEditButton=P(["car__edit-button"],"",L("./assets/icons/pen-to-square-solid.svg#edit","car__stop-icon")),this.carDeleteButton=P(["car__delete-button"],"",L("./assets/icons/trash-solid.svg#remove","car__stop-icon")),this.carRunButton=P(["car__run-button"],"",L("./assets/icons/play-solid.svg#play","car__stop-icon")),this.carStopButton=P(["car__stop-button"],"",L("./assets/icons/stop-solid.svg#stop","car__stop-icon")),this.carStopButton.getComponent().disabled=!0,this.carStopButton.addListener("click",(()=>{this.carStopButton.getComponent().disabled=!0}))}lockControlsOnMove(){this.unlockAllControls(),this.carRunButton.getComponent().disabled=!0,this.carDeleteButton.getComponent().disabled=!0,this.carEditButton.getComponent().disabled=!0}lockAllControls(){this.carRunButton.getComponent().disabled=!0,this.carDeleteButton.getComponent().disabled=!0,this.carEditButton.getComponent().disabled=!0,this.carStopButton.getComponent().disabled=!0}unlockAllControls(){this.carRunButton.getComponent().disabled=!1,this.carDeleteButton.getComponent().disabled=!1,this.carEditButton.getComponent().disabled=!1,this.carStopButton.getComponent().disabled=!1}lockStopButton(){this.unlockAllControls(),this.carStopButton.getComponent().disabled=!0}};const pt=function(t){return n=this,e=arguments,a=function*({name:t,color:n,id:e}){try{const o=yield fetch(`${$.GARAGE}/${e}`,{method:"PUT",body:JSON.stringify({name:t,color:n}),headers:{"Content-Type":"application/json"}});if(404===o.status&&K.emit("actualize-collection"),o.ok){const t=yield o.json();return M(t,N),t}throw new Error(`Cannot update car id=${e} with options ${t}, ${n}`)}catch(t){return console.log("Cannot update car"),{}}},new((o=void 0)||(o=Promise))((function(t,r){function i(t){try{c(a.next(t))}catch(t){r(t)}}function s(t){try{c(a.throw(t))}catch(t){r(t)}}function c(n){var e;n.done?t(n.value):(e=n.value,e instanceof o?e:new o((function(t){t(e)}))).then(i,s)}c((a=a.apply(n,e||[])).next())}));var n,e,o,a};var gt=function(t,n,e,o){return new(e||(e=Promise))((function(a,r){function i(t){try{c(o.next(t))}catch(t){r(t)}}function s(t){try{c(o.throw(t))}catch(t){r(t)}}function c(t){var n;t.done?a(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(i,s)}c((o=o.apply(t,n||[])).next())}))};const mt=class extends C{constructor(t,n,e){super("div",["car"],{},{}),this.id=t,this.name=n,this.color=e,this.engine=new ut(this.id),this.animationID=0,this.controls=new ht,this.carImage=L("./assets/car/sedan.svg#car0","car__image"),this.carImage.style.setProperty("fill",this.color),this.nameLabel=T(["car__name"],this.name),this.carStateLabel=T(["car__state-label"],""),this.carTrack=w(["car__track"],this.carImage,w(["car__finish"])),this.appendContent([w(["car__buttons"],this.controls.carEditButton,this.controls.carDeleteButton,this.nameLabel,this.carStateLabel),w(["car__body"],w(["car__controls"],this.controls.carRunButton,this.controls.carStopButton),this.carTrack,w(["car__finish-place"])),w(["car__road"])]),this.engine.on({onmoveControls:()=>this.controls.lockControlsOnMove(),unlockAllControls:()=>this.controls.unlockAllControls(),lockStopButton:()=>this.controls.lockStopButton(),startAnimation:t=>this.animateMove(t),stopAnimation:()=>this.stopMoving(),moveCarToStart:()=>this.moveCarToStart(),setCarStatus:t=>this.updateCarStateLabel(t)}),this.controls.carRunButton.addListener("click",(()=>this.engine.emit("start-car"))),this.controls.carStopButton.addListener("click",(()=>this.engine.emit("reset"))),this.controls.carEditButton.addListener("click",(()=>this.editCar()))}editCar(){Y.setProps(this.id,this.name,this.color),K.once("edit-car",(()=>gt(this,void 0,void 0,(function*(){Y.getId()===`${this.id}`&&(this.name=Y.getName(),this.color=Y.getColor(),yield pt({name:this.name,color:this.color,id:this.id}),this.nameLabel.setTextContent(this.name),this.carImage.style.setProperty("fill",this.color),Y.resetInputs(),K.emit("car-edited"))}))))}updateCarStateLabel(t){this.carStateLabel.setTextContent(t)}animateMove(t){const n=performance.now(),e=o=>{let a=(o-n)/t;a>1&&(a=1),this.carImage.style.setProperty("left",`calc(${100*a}%)`),a<1&&(this.animationID=requestAnimationFrame(e))};this.animationID=requestAnimationFrame(e)}stopMoving(){this.animationID&&cancelAnimationFrame(this.animationID)}moveCarToStart(){this.updateCarStateLabel(" "),this.carImage.style.removeProperty("left")}resetMoving(){return gt(this,void 0,void 0,(function*(){yield st(this.id,"stopped"),this.stopMoving(),this.moveCarToStart(),this.controls.lockStopButton(),this.engine.emit("reset")}))}getID(){return this.id}};const ft=function(t){return n=this,e=void 0,a=function*(){const n=yield fetch(`${$.GARAGE}/${t}`,{method:"DELETE"});404===n.status&&K.emit("actualize-collection");const e=yield n.json();return M(e,N),e},new((o=void 0)||(o=Promise))((function(t,r){function i(t){try{c(a.next(t))}catch(t){r(t)}}function s(t){try{c(a.throw(t))}catch(t){r(t)}}function c(n){var e;n.done?t(n.value):(e=n.value,e instanceof o?e:new o((function(t){t(e)}))).then(i,s)}c((a=a.apply(n,e||[])).next())}));var n,e,o,a},vt=class{constructor(t,n){this.collection=t,this.itemsPerPage=n}getItemCount(){return this.collection.length}getPageCount(){return Math.ceil(this.collection.length/this.itemsPerPage)}getItemCountOnPage(t){return t>=this.getPageCount()||t<0?-1:this.getItemCount()%this.itemsPerPage&&t===this.getPageCount()-1?this.getItemCount()%this.itemsPerPage:this.itemsPerPage}removeItem(t){this.collection.splice(t,1)}addItem(t){this.collection.push(t)}updateCollection(t){this.collection=t}getItemsOnPage(t){const n=this.getItemCountOnPage(t),e=this.getItemCountOnPage(0);return n<=0?[]:this.collection.length?this.collection.slice(t*e,t*e+n):[]}pageIndex(t){return t>=this.getItemCount()||t<0?-1:Math.ceil((t+1)/this.itemsPerPage)-1}};var Ct=function(t,n,e,o){return new(e||(e=Promise))((function(a,r){function i(t){try{c(o.next(t))}catch(t){r(t)}}function s(t){try{c(o.throw(t))}catch(t){r(t)}}function c(t){var n;t.done?a(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(i,s)}c((o=o.apply(t,n||[])).next())}))};var bt=e(783),yt={};yt.styleTagTransform=h(),yt.setAttributes=c(),yt.insert=i().bind(null,"head"),yt.domAPI=a(),yt.insertStyleElement=d(),n()(bt.A,yt),bt.A&&bt.A.locals&&bt.A.locals;const wt=class extends C{constructor(t,n){super("li",["winner"]),this.info=t,this.number=n,this.winnerNumber=T(["winner__number"],`${n}`),this.winnerImage=L("./assets/car/sedan.svg#car0","winner__image"),this.winnerImage.style.fill=t.color,this.winnerName=T(["winner__name"],t.name),this.winnerWins=T(["winner__wins"],`${t.wins}`),this.winnerTime=T(["winner__time"],`${t.time.toFixed(2)}`),this.appendContent([this.winnerNumber,this.winnerImage,this.winnerName,this.winnerWins,this.winnerTime])}getID(){return this.info.id}increaseWinsCount(){this.info.wins+=1,this.winnerWins.setTextContent(`${this.info.wins}`)}updateWinnerResult(t,n){this.increaseWinsCount();const e=Math.round(t.raceParams.distance/t.raceParams.velocity)/1e3;this.info.time>e&&(this.info.time=e,this.winnerTime.setTextContent(e.toFixed(2))),this.info.name=t.carInfo.name,this.info.color=t.carInfo.color,this.winnerName.setTextContent(`${this.info.name}`),this.winnerImage.style.fill=this.info.color,this.winnerNumber.setTextContent(`${n}`)}};const xt=function(t){return n=this,e=void 0,a=function*(){(yield fetch(`${$.WINNERS}/${t}`,{method:"DELETE"})).ok||console.log(`Cannot delete winner with id ${t}`)},new((o=void 0)||(o=Promise))((function(t,r){function i(t){try{c(a.next(t))}catch(t){r(t)}}function s(t){try{c(a.throw(t))}catch(t){r(t)}}function c(n){var e;n.done?t(n.value):(e=n.value,e instanceof o?e:new o((function(t){t(e)}))).then(i,s)}c((a=a.apply(n,e||[])).next())}));var n,e,o,a};const _t=function(t){return n=this,e=void 0,a=function*(){const n=yield fetch($.WINNERS,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}});if(n.ok){const t=yield n.json();return M(t,V),t}throw new Error(`Cannot create winner with options ${t}`)},new((o=void 0)||(o=Promise))((function(t,r){function i(t){try{c(a.next(t))}catch(t){r(t)}}function s(t){try{c(a.throw(t))}catch(t){r(t)}}function c(n){var e;n.done?t(n.value):(e=n.value,e instanceof o?e:new o((function(t){t(e)}))).then(i,s)}c((a=a.apply(n,e||[])).next())}));var n,e,o,a};const St=function(t){return n=this,e=arguments,a=function*({id:t,wins:n,time:e}){const o=yield fetch(`${$.WINNERS}/${t}`,{method:"PUT",body:JSON.stringify({wins:n,time:e}),headers:{"Content-Type":"application/json"}});if(o.ok){const t=yield o.json();return M(t,V),t}throw new Error(`Cannot update winner with ${t}`)},new((o=void 0)||(o=Promise))((function(t,r){function i(t){try{c(a.next(t))}catch(t){r(t)}}function s(t){try{c(a.throw(t))}catch(t){r(t)}}function c(n){var e;n.done?t(n.value):(e=n.value,e instanceof o?e:new o((function(t){t(e)}))).then(i,s)}c((a=a.apply(n,e||[])).next())}));var n,e,o,a};var At=function(t,n,e,o){return new(e||(e=Promise))((function(a,r){function i(t){try{c(o.next(t))}catch(t){r(t)}}function s(t){try{c(o.throw(t))}catch(t){r(t)}}function c(t){var n;t.done?a(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(i,s)}c((o=o.apply(t,n||[])).next())}))};const Pt=new class extends vt{constructor(){super([],10),this.sortOptions={sort:"time",order:"ASC"},K.on("winner-created",(()=>{this.reloadWinnersCollection(),K.emit("winners-collection-changed")})),K.on("car-removed",(()=>{this.reloadWinnersCollection(),K.emit("winners-collection-changed")})),K.on("car-edited",(()=>{this.reloadWinnersCollection(),K.emit("winners-collection-changed")})),K.on("change-sort-win",(()=>At(this,void 0,void 0,(function*(){yield this.sortBy("wins")})))),K.on("change-sort-time",(()=>At(this,void 0,void 0,(function*(){yield this.sortBy("time")}))))}sortBy(t){return At(this,void 0,void 0,(function*(){this.sortOptions.sort===t?this.sortOptions.order="ASC"===this.sortOptions.order?"DESC":"ASC":(this.sortOptions.sort=t,this.sortOptions.order="ASC"),yield this.reloadWinnersCollection(),K.emit("winners-collection-changed"),"ASC"===this.sortOptions.order?K.emit(`winners-sorted-asc-${t}`):K.emit(`winners-sorted-desc-${t}`)}))}removeWinner(t){return At(this,void 0,void 0,(function*(){const n=this.collection.findIndex((n=>n.getID()===t));-1!==n&&(this.collection[n].destroy(),yield xt(t),this.removeItem(n),K.emit("winner-removed"))}))}reloadWinnersCollection(){return At(this,void 0,void 0,(function*(){const t=(yield function(t){return Ct(this,arguments,void 0,(function*({sort:t,order:n}){try{const e=yield fetch(`${$.WINNERS}?_sort=${t}&_order=${n}`);if(!e.ok)throw new Error(e.statusText);const o=yield e.json();if(!Array.isArray(o))throw new Error("Response should be an Array");G(o,j);const a=yield Promise.all(o.map((t=>Ct(this,void 0,void 0,(function*(){return yield Z(t.id)})))));return o.map(((t,n)=>Object.assign(Object.assign({},t),{name:a[n].name,color:a[n].color})))}catch(t){return console.log("Failed to fetch. Please, launch the server."),[]}}))}(this.sortOptions)).map(((t,n)=>new wt(t,n+1)));this.collection=t}))}addWinner(t){return At(this,void 0,void 0,(function*(){const n=this.collection.findIndex((n=>n.getID()===t.carInfo.id)),e=yield function(t){return Ct(this,void 0,void 0,(function*(){try{const n=yield fetch(`${$.WINNERS}/${t}`);404===n.status&&K.emit("actualize-collection");const e=yield n.json();return M(e,V),e}catch(n){return console.log(`The winner with id = ${t} not found among winners.`),{}}}))}(t.carInfo.id),o={id:t.carInfo.id,wins:1,time:Math.round(t.raceParams.distance/t.raceParams.velocity)/1e3};if(-1===n){const n=Object.assign(Object.assign({},o),{color:t.carInfo.color,name:t.carInfo.name}),e=new wt(n,this.collection.length+1);yield _t(o),this.collection.push(e),K.emit("winner-created")}else this.collection[n].updateWinnerResult(t,n+1),e.time>o.time&&(e.time=o.time),e.wins+=1,yield St(e),K.emit("winner-created")}))}},kt=Pt;var Tt=function(t,n,e,o){return new(e||(e=Promise))((function(a,r){function i(t){try{c(o.next(t))}catch(t){r(t)}}function s(t){try{c(o.throw(t))}catch(t){r(t)}}function c(t){var n;t.done?a(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(i,s)}c((o=o.apply(t,n||[])).next())}))};const Lt=new class extends vt{constructor(){super([],7),K.on("car-created",(()=>{this.updateCarsCollection(),K.emit("collection-changed")})),K.on("generate-random-cars",(()=>Tt(this,void 0,void 0,(function*(){yield function(){return D(this,void 0,void 0,(function*(){const t=[];for(let n=0;n<100;n+=1)t.push(F());return yield Promise.all(t)}))}(),this.updateCarsCollection(),K.emit("collection-changed")}))))}removeCar(t){return Tt(this,void 0,void 0,(function*(){const n=this.collection.findIndex((n=>n.getID()===t));this.collection[n].destroy(),yield ft(t),yield kt.removeWinner(t),this.removeItem(n),K.emit("car-removed")}))}checkCollection(){return Tt(this,void 0,void 0,(function*(){const t=this.collection.map((t=>t.getID())),n=yield q();return n.length===this.collection.length&&n.every(((n,e)=>n.id===t[e]))}))}reloadCarsCollection(){return Tt(this,void 0,void 0,(function*(){const t=(yield q()).map((t=>{const n=new mt(t.id,t.name,t.color);return n.controls.carDeleteButton.addListener("click",(()=>this.removeCar(n.getID()))),n}));this.updateCollection(t)}))}updateCarsCollection(){return Tt(this,void 0,void 0,(function*(){const t=(yield q()).map(((t,n)=>{if(n<this.collection.length&&t.id===this.collection[n].getID())return this.collection[n];const e=new mt(t.id,t.name,t.color);return e.controls.carDeleteButton.addListener("click",(()=>this.removeCar(e.getID()))),e}));this.updateCollection(t)}))}},It=Lt;var Et=e(830),Rt={};Rt.styleTagTransform=h(),Rt.setAttributes=c(),Rt.insert=i().bind(null,"head"),Rt.domAPI=a(),Rt.insertStyleElement=d(),n()(Et.A,Rt),Et.A&&Et.A.locals&&Et.A.locals;const Bt=new class extends C{constructor(){super("div",["garage__pagination"]),this.totalCountLabel=_(["garage__pagination-total-count"],""),this.prevPageButton=P(["garage__pagination-prev"],"<"),this.nextPageButton=P(["garage__pagination-next"],">"),this.paginationLabel=T(["garage__pagination-label"],""),this.appendContent([this.totalCountLabel,w(["garage__pagination-container"],this.prevPageButton,this.paginationLabel,this.nextPageButton)]),K.on("race-started",(()=>this.lockPagination())),K.on("race-ended",(()=>this.unlockPagination()))}setTotalCount(t){this.totalCountLabel.setTextContent(`TOTAL COUNT: ${t}`)}updatePaginationLabel(t){this.paginationLabel.setTextContent(t)}lockPagination(){this.prevPageButton.getComponent().disabled=!0,this.nextPageButton.getComponent().disabled=!0}unlockPagination(){this.prevPageButton.getComponent().disabled=!1,this.nextPageButton.getComponent().disabled=!1}};const Mt=new class extends C{constructor(){super("div",["garage__pages"],{},{}),this.currentCars=[],this.currentPageIndex=0,this.update(),Bt.nextPageButton.addListener("click",(()=>this.nextPage())),Bt.prevPageButton.addListener("click",(()=>this.prevPage())),K.on("car-removed",(()=>this.redrawPageContent())),K.on("actualize-collection",(()=>{return t=this,n=void 0,o=function*(){(yield It.checkCollection())||this.restore()},new((e=void 0)||(e=Promise))((function(a,r){function i(t){try{c(o.next(t))}catch(t){r(t)}}function s(t){try{c(o.throw(t))}catch(t){r(t)}}function c(t){var n;t.done?a(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(i,s)}c((o=o.apply(t,n||[])).next())}));var t,n,e,o})),K.on("collection-changed",(()=>this.update())),K.on("reset-race",(()=>{this.currentCars.forEach((t=>t.engine.emit("reset")))}))}updateContent(){ot.close(),this.currentCars=It.getItemsOnPage(this.currentPageIndex),this.appendContent(this.currentCars),Bt.setTotalCount(It.getItemCount()),Bt.updatePaginationLabel(`${this.currentPageIndex+1} / ${It.getPageCount()}`)}update(){ot.draw(),It.updateCarsCollection().then((()=>this.updateContent()))}restore(){this.clearAll(),ot.draw(),It.reloadCarsCollection().then((()=>this.updateContent()))}nextPage(){this.currentPageIndex!==It.getPageCount()-1&&(this.currentPageIndex+=1,this.redrawPageContent())}prevPage(){0!==this.currentPageIndex&&(this.currentPageIndex-=1,this.redrawPageContent())}redrawPageContent(){if(this.clearAll(),this.currentCars=It.getItemsOnPage(this.currentPageIndex),0===this.currentCars.length)return Bt.setTotalCount(It.getItemCount()),void this.prevPage();this.appendContent(this.currentCars),Bt.setTotalCount(It.getItemCount()),Bt.updatePaginationLabel(`${this.currentPageIndex+1} / ${It.getPageCount()}`)}},Gt=Mt;var $t=e(16),Wt={};Wt.styleTagTransform=h(),Wt.setAttributes=c(),Wt.insert=i().bind(null,"head"),Wt.domAPI=a(),Wt.insertStyleElement=d(),n()($t.A,Wt),$t.A&&$t.A.locals&&$t.A.locals;const jt=new class extends C{constructor(){super("div",["overlay","overlay_transparent"],{},{}),this.addListener("click",(()=>this.closeWinModal())),this.carImg=L("./assets/car/sedan.svg#car0","winner__image")}openWinModal(t){const n=t?Math.round(t.raceParams.distance/t.raceParams.velocity)/1e3:0,e=t?`${t.carInfo.name}, finished in ${n.toFixed(2)}s`:"All cars were broken!";this.carImg.style.fill=t?t.carInfo.color:"transparent",this.append(w(["modal-winner"],S(["modal-winner__title"],"Winner:"),this.carImg,x(["modal-winner__text"],e))),document.body.append(this.getComponent())}closeWinModal(){this.destroy()}},Nt=jt;var Xt=function(t,n,e,o){return new(e||(e=Promise))((function(a,r){function i(t){try{c(o.next(t))}catch(t){r(t)}}function s(t){try{c(o.throw(t))}catch(t){r(t)}}function c(t){var n;t.done?a(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(i,s)}c((o=o.apply(t,n||[])).next())}))};const Ot={"all-cars-in-garage":{"start-race":{toState:"cars-ready",callbacks:["block-pagination-buttons","prepare-cars"]},"reset-race":{toState:"all-cars-in-garage",callbacks:["reset"]},"race-finish":{toState:"all-cars-in-garage",callbacks:["reset"]},"cars-prepared":{toState:"all-cars-in-garage",callbacks:["reset"]}},"cars-ready":{"cars-prepared":{toState:"cars-moving",callbacks:["on-engines"]},"start-race":{toState:"all-cars-in-garage",callbacks:["restart-race"]},"reset-race":{toState:"all-cars-in-garage",callbacks:["reset"]}},"cars-moving":{"race-finish":{toState:"cars-finished",callbacks:["stop-engines","unlock-pagination-buttons"]},"start-race":{toState:"all-cars-in-garage",callbacks:["restart-race"]},"reset-race":{toState:"all-cars-in-garage",callbacks:["reset"]},"cars-prepared":{toState:"all-cars-in-garage",callbacks:["restart-race"]}},"cars-finished":{"start-race":{toState:"all-cars-in-garage",callbacks:["restart"]},"reset-race":{toState:"all-cars-in-garage",callbacks:["reset"]}}};var Vt=function(t,n,e,o){return new(e||(e=Promise))((function(a,r){function i(t){try{c(o.next(t))}catch(t){r(t)}}function s(t){try{c(o.throw(t))}catch(t){r(t)}}function c(t){var n;t.done?a(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(i,s)}c((o=o.apply(t,n||[])).next())}))};const Dt=new class extends tt{constructor(){super({currentState:"all-cars-in-garage",states:Ot,callbacks:{"block-pagination-buttons":()=>{},"prepare-cars":()=>Vt(this,void 0,void 0,(function*(){yield this.prepareCars()})),"on-engines":()=>Vt(this,void 0,void 0,(function*(){const t=this.getRaceParticipants();t&&(yield function(t,n){return Xt(this,void 0,void 0,(function*(){const e=t.map((t=>Xt(this,void 0,void 0,(function*(){return function(t,n){return Xt(this,void 0,void 0,(function*(){if(!t.raceParams)return Promise.reject(new Error("Car is not found"));t.component.animateMove(t.raceParams.distance/t.raceParams.velocity),t.component.controls.lockAllControls();const e=yield ct(t.carInfo.id,n);return e.success?(t.component.stopMoving(),t.component.updateCarStateLabel("car is finished"),t):(e.success||t.component.stopMoving(),t.component.updateCarStateLabel("car is broken"),Promise.reject(new Error("Car is stopped")))}))}(t,n)}))));Promise.allSettled(e).then((()=>{t.forEach((t=>Xt(this,void 0,void 0,(function*(){yield st(t.component.getID(),"stopped"),t.component.controls.lockControlsOnMove(),t.component.engine.emit("finish")})))),console.log("Race ended"),K.emit("race-ended")}));const o=yield Promise.any(e);o&&function(t){kt.addWinner(t)}(o),Nt.openWinModal(o)}))}(t,this.abortController)),this.emit("race-finish")})),"stop-engines":()=>{setTimeout((()=>console.log(this.getCurrentState())),0)},"unlock-pagination-buttons":()=>{},restart:()=>this.restartRace(),reset:()=>{this.currentParticipants&&function(t){t.forEach((t=>Xt(this,void 0,void 0,(function*(){yield t.component.resetMoving()})))),K.emit("reset-race")}(this.currentParticipants),this.abortController.abort("reset race")}}}),this.currentParticipants=[],this.currentPage=1,this.abortController=new AbortController}prepareCars(){return Vt(this,void 0,void 0,(function*(){this.abortController=new AbortController,yield this.setParticipants(),this.emit("cars-prepared")}))}setParticipants(){return Vt(this,void 0,void 0,(function*(){this.currentPage=Gt.currentPageIndex;const t=yield function(t){return Xt(this,void 0,void 0,(function*(){K.emit("race-started");const n=yield function(t){return U(this,void 0,void 0,(function*(){const n=yield fetch(`${$.GARAGE}/?_page=${t}&_limit=7`);if(!n.headers.get("X-Total-Count"))throw new Error("No cars on this page!");const e=yield n.json();return G(e,N),e}))}(t),e=It.getItemsOnPage(t-1),o=n.map(((t,n)=>Xt(this,void 0,void 0,(function*(){"in-garage"!==e[n].engine.getCurrentState()&&(yield st(t.id,"stopped"));const o=yield st(t.id,"started");return e[n].engine.emit("start-race"),e[n].updateCarStateLabel("car in a race"),o})))),a=yield Promise.all(o);return n.map(((t,n)=>({carInfo:t,raceParams:a[n],component:e[n]})))}))}(this.currentPage+1);this.currentParticipants=t}))}getRaceParticipants(){return this.currentParticipants}restartRace(){this.currentParticipants=[],this.abortController.abort(),this.emit("start-race")}},Ft=Dt,zt=new class extends C{constructor(){super("div",["garage__control-race"]),this.startRaceButton=P(["garage__control-race-start"],"START RACE"),this.stopRaceButton=P(["garage__control-race-stop"],"RESET RACE"),this.appendContent([this.startRaceButton,this.stopRaceButton]),this.startRaceButton.addListener("click",(()=>Ft.emit("start-race"))),this.stopRaceButton.addListener("click",(()=>Ft.emit("reset-race"))),K.on("race-started",(()=>this.lockStartButton())),K.on("reset-race",(()=>this.unlockStartButton()))}lockStartButton(){this.startRaceButton.getComponent().disabled=!0}unlockStartButton(){this.startRaceButton.getComponent().disabled=!1}},Kt=new class extends C{constructor(){super("div",["garage__controls"],{},{},H,Y,J,zt)}},Ht=new class extends C{constructor(){super("div",["garage"],{},{},_(["garage__title"],"GARAGE"),Kt,Bt,Gt)}render(){document.body.append(this.getComponent())}};var Jt=e(361),Ut={};Ut.styleTagTransform=h(),Ut.setAttributes=c(),Ut.insert=i().bind(null,"head"),Ut.domAPI=a(),Ut.insertStyleElement=d(),n()(Jt.A,Ut),Jt.A&&Jt.A.locals&&Jt.A.locals;const Zt=new class extends C{constructor(){super("ul",["winners__table-body"],{},{})}},qt=new class extends C{constructor(){super("div",["winners__table-controls"],{},{}),this.title=S(["winners__table-title"],""),this.prevPageButton=P(["winners__pagination-prev"],"<"),this.nextPageButton=P(["winners__pagination-next"],">"),this.paginationLabel=T(["winners__pagination-label"],""),this.appendContent([this.title,w(["winners__table-pagination"],this.prevPageButton,this.paginationLabel,this.nextPageButton)]),this.prevPageButton.addListener("click",(()=>K.emit("open-prev-winners-page"))),this.nextPageButton.addListener("click",(()=>K.emit("open-next-winners-page")))}setTotalCount(t){this.title.setTextContent(`TOTAL COUNT: ${t}`)}updatePaginationLabel(t){this.paginationLabel.setTextContent(t)}},Qt=new class extends C{constructor(){super("div",["winners__table-header"],{},{},T(["winners__table-number"],"#"),T(["winners__table-color"],"color"),T(["winners__table-name"],"name")),this.wins=P(["winners__table-wins"],"wins"),this.time=P(["winners__table-time","asc"],"time"),this.appendContent([this.wins,this.time]),this.wins.addListener("click",(()=>K.emit("change-sort-win"))),this.time.addListener("click",(()=>K.emit("change-sort-time"))),K.on("winners-sorted-desc-wins",(()=>this.setDescWins())),K.on("winners-sorted-asc-wins",(()=>this.setAscWins())),K.on("winners-sorted-desc-time",(()=>this.setDescTime())),K.on("winners-sorted-asc-time",(()=>this.setAscTime()))}resetSortAppearance(){this.time.getComponent().className="winners__table-time",this.wins.getComponent().className="winners__table-wins"}setDescWins(){this.resetSortAppearance(),this.wins.getComponent().classList.add("desc")}setAscWins(){this.resetSortAppearance(),this.wins.getComponent().classList.add("asc")}setDescTime(){this.resetSortAppearance(),this.time.getComponent().classList.add("desc")}setAscTime(){this.resetSortAppearance(),this.time.getComponent().classList.add("asc")}},Yt=new class extends C{constructor(){super("div",["winners__table"],{},{}),this.currentWinners=[],this.currentPageIndex=0,this.appendContent([qt,Qt,Zt]),this.update(),K.on("winners-collection-changed",(()=>this.contentChangedHandler())),K.on("open-prev-winners-page",(()=>this.prevPage())),K.on("open-next-winners-page",(()=>this.nextPage()))}update(){kt.reloadWinnersCollection().then((()=>this.updateContent()))}contentChangedHandler(){Zt.clearAll(),kt.reloadWinnersCollection().then((()=>this.updateContent()))}updateContent(){this.currentWinners=kt.getItemsOnPage(this.currentPageIndex),Zt.appendContent(this.currentWinners),qt.setTotalCount(kt.getItemCount()),qt.updatePaginationLabel(`${this.currentPageIndex+1} / ${kt.getPageCount()}`)}nextPage(){this.currentPageIndex!==kt.getPageCount()-1&&(this.currentPageIndex+=1,this.redrawPageContent())}prevPage(){0!==this.currentPageIndex&&(this.currentPageIndex-=1,this.redrawPageContent())}redrawPageContent(){if(Zt.clearAll(),this.currentWinners=kt.getItemsOnPage(this.currentPageIndex),0===this.currentWinners.length)return qt.setTotalCount(kt.getItemCount()),void this.prevPage();Zt.appendContent(this.currentWinners),qt.setTotalCount(kt.getItemCount()),qt.updatePaginationLabel(`${this.currentPageIndex+1} / ${kt.getPageCount()}`)}},tn=new class extends C{constructor(){super("div",["winners"],{},{},_(["winners__title"],"WINNERS"),Yt)}};var nn=e(61),en={};en.styleTagTransform=h(),en.setAttributes=c(),en.insert=i().bind(null,"head"),en.domAPI=a(),en.insertStyleElement=d(),n()(nn.A,en),nn.A&&nn.A.locals&&nn.A.locals;const on=new class extends C{constructor(){super("header",["header"],{},{},new C("h1",["header__logo"],{textContent:"ASYNC RACE"})),this.toWinners=A(["header__link"],"winners","#/winners"),this.toGarage=A(["header__link"],"garage","#/garage"),this.append(new C("nav",["header__nav"],{},{},this.toGarage,this.toWinners))}winners(){this.toGarage.getComponent().classList.remove("header__link_active"),this.toWinners.getComponent().classList.add("header__link_active")}garage(){this.toGarage.getComponent().classList.add("header__link_active"),this.toWinners.getComponent().classList.remove("header__link_active")}render(){document.body.append(this.getComponent())}},an=new class extends C{constructor(){super("main",["main"],{},{})}render(){document.body.append(this.getComponent())}drawGarage(){tn.getComponent().remove(),on.garage(),this.append(Ht)}drawWinners(){Ht.getComponent().remove(),on.winners(),this.append(tn)}},rn=new Map([["/",()=>{window.location.href="#/garage"}],["/garage",()=>{an.drawGarage()}],["/winners",()=>{an.drawWinners()}]]),sn=()=>{const t=window.location.hash.slice(1).toLowerCase()||"/",n=rn.get(t);n&&n()};window.addEventListener("hashchange",sn),window.addEventListener("load",sn);const cn=sn;var ln=e(449),dn={};dn.styleTagTransform=h(),dn.setAttributes=c(),dn.insert=i().bind(null,"head"),dn.domAPI=a(),dn.insertStyleElement=d(),n()(ln.A,dn),ln.A&&ln.A.locals&&ln.A.locals;const un=new class extends C{constructor(){super("footer",["footer"],{},{},w(["footer__container"],x(["footer__year"],"2024"),A(["footer__github"],"alv0425","https://github.com/alv0425"),A(["footer__rss"],"","https://rs.school/js/")))}render(){document.body.append(this.getComponent())}};on.render(),an.render(),un.render(),cn()})()})();